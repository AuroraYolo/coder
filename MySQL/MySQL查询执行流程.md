## MySQL SQL语句执行流程
![avatar](MySQL的逻辑架构图.png)

大体来说,MySQL可以分为Server层和存储引擎层两部分.
Server层包括连接器、查询缓存、分析器、优化器、执行器等,涵盖MySQL的大多数核心服务功能,以及
所有的内置函数(如日期,时间,数学和加密函数),所有跨存储引擎的功能都在这一层实现,比如存储过程
触发器、视图等.

存储引擎只负责数据的存储和提取.其架构模式是插件式的,支持InnoDB、MyiSAM、Memory
等多个存储引擎,现在最常用的存储引擎是InnoDB.从MySQL5.5.5版本开始成为了默认引擎.

### 连接器.
第一步,先连接到数据库服务器上,这时候接待你的就是连接器.连接器负责跟客户端建立连接、获取权限、维持和管理连接.
连接命令: mysql -h$ip -p$port -u$user -p

### 查询缓存
连接建立完成后,就可以执行select语句了.执行逻辑来到第二步:查询缓存.

MySQL拿到一个查询请求后,会先到查询缓存查看,如果命中查询缓存就以key-value的形式返回.
如果没有命中缓存,就进入下一个执行阶段.
不建议开启缓存,MySQL8.0废弃了查询缓存.
### 分析器
 没有命中查询缓存,开始执行语句,MySQL对SQL语句做解析.查看SQL语句是否满足MySQL语法,
 如果不满足就抛出错误.
 
 ### 优化器
 
 经过了分析器,还要经过优化器.优化器是在表里有多个索引时,决定使用哪个索引;或者在一个语句中有多表
 关联(join),决定各个表的连接顺序.
 
 ### 执行器
 
 开始执行的时候,判断一下对这个表有没有执行查询的权限,如果没有,就会返回没有权限的错误,如果有权限,就打开表
 继续执行。打开表的时候,执行器就会根据表的引擎定义,去使用(InnoDB,MyiSAM)引擎提供的接口.然后返回执行的结果.
 
