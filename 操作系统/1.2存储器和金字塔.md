## CPU Cache

```
CPU Cache 通常会分为 L1、L2、L3 三层，其中 L1 Cache 通常分成「数据缓存」和「指令缓存」，L1
是距离 CPU 最近的，因此它⽐ L2、L3 的读写速度都快、存储空间都⼩。我们⼤脑中短期记忆，就好⽐
L1 Cache，⽽⻓期记忆就好⽐ L2/L3 Cache。
寄存器和 CPU Cache 都是在 CPU 内部，跟 CPU 挨着很近，因此它们的读写速度都相当的快，但是能存
储的数据很少，毕竟 CPU 就这么丁点⼤。
```

### 各种存储器之间的关系理解

```
CPU 可以⽐喻成我们的⼤脑，我们当前正在思考和处理的知识的过程，就好⽐ CPU 中的寄存器处理数据
的过程，速度极快，但是容量很⼩。⽽ CPU 中的 L1-L3 Cache 好⽐我们⼤脑中的短期记忆和⻓期记忆，
需要⼩⼩花费点时间来调取数据并处理。
我们⾯前的桌⼦就相当于内存，能放下更多的书（数据），但是找起来和看起来就要花费⼀些时间，相⽐
CPU Cache 慢不少。⽽图书馆的书架相当于硬盘，能放下⽐内存更多的数据，但找起来就更费时间了，可
以说是最慢的存储器设备了。
从 寄存器、CPU Cache，到内存、硬盘，这样⼀层层下来的存储器，访问速度越来越慢，存储容量越来越
⼤，价格也越来越便宜，⽽且每个存储器只和相邻的⼀层存储器设备打交道，于是这样就形成了存储器的
层次结构。
再来回答，开头的问题：那机械硬盘、固态硬盘、内存这三个存储器，到底和 CPU L1 Cache 相⽐速度
差多少倍呢？
CPU L1 Cache 随机访问延时是 1 纳秒，内存则是 100 纳秒，所以 CPU L1 Cache ⽐内存快 100 倍左
右。
SSD 随机访问延时是 150 微妙，所以 CPU L1 Cache ⽐ SSD 快 150000 倍左右。
最慢的机械硬盘随机访问延时已经⾼达 10 毫秒，我们来看看机械硬盘到底有多「⻳速」：
SSD ⽐机械硬盘快 70 倍左右；
内存⽐机械硬盘快 100000 倍左右；
CPU L1 Cache ⽐机械硬盘快 10000000 倍左右；
我们把上述的时间⽐例差异放⼤后，就能⾮常直观感受到它们的性能差异了。如果 CPU 访问 L1 Cache 的
缓存时间是 1 秒，那访问内存则需要⼤约 2 分钟，随机访问 SSD ⾥的数据则需要 1.7 天，访问机械硬盘
那更久，⻓达近 4 个⽉。
可以发现，不同的存储器之间性能差距很⼤，构造存储器分级很有意义，分级的⽬的是要构造缓存体系。
```
